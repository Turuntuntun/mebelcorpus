var RSGOPRO_ParentsObj,RSGOPRO_PopupPrefix="rsgppopup_",RSGOPRO_DivsLeft='<div class="outer"><div class="inner">',RSGOPRO_DivsRight="</div></div>";function RSGoPro_OnOfferChangePopup(o){var e=o.find(".js-add2basketpid").val(),n=o.data("elementid");0<e&&RSGoPro_OFFERS[n].OFFERS[e].IMAGES[0].src&&RSGoPro_OFFERS[n].OFFERS[e].IMAGES[0].src.indexOf("redsign_devfunc_nophoto")<0&&0<o.find(".pic img").length&&o.find(".pic img").attr("src",RSGoPro_OFFERS[n].OFFERS[e].IMAGES[0].src)}function RSGoProPricesJScrollPaneReinitialize(){setTimeout(function(){$(".prs_jscrollpane").parents(".prices").removeClass("jspHasScroll"),$(".prs_jscrollpane").each(function(o){$(this).data("jsp").reinitialise(),$(this).hasClass("jspScrollable")&&$(this).parents(".prices").addClass("jspHasScroll")})},50)}function RSGoPro_FixPreviewText(o){var e=$("#"+RSGOPRO_PopupPrefix+o).find(".block.right").outerHeight(!0);if(null!=e&&350<e){var n=$("#"+RSGOPRO_PopupPrefix+o).find(".description").find(".text"),i=18*Math.floor((n.outerHeight(!0)-(e-350))/18);n.css("maxHeight",i+"px")}}function RSGoPro_GoPopup(o,e){o=parseInt(o),RSGOPRO_ParentsObj=e,0<o?0<$("#"+RSGOPRO_PopupPrefix+o).length?RSGoPro_ShowPopup(o):RSGoPro_AddPopup(o):console.warn("GoPopup: element_id is empty")}function RSGoPro_ShowPopup(o){RSGoPro_ChangePosition(o),$("#"+RSGOPRO_PopupPrefix+o).fadeIn("fast",function(){RSGoPro_FixPreviewText(o),RSGoPro_SetSet(),RSGoPro_ScrollReinit(".elementpopupinner .prs_jscrollpane",1)})}function RSGoPro_HidePopup(o){$("#"+RSGOPRO_PopupPrefix+o).fadeOut("fast",function(){})}function RSGoPro_ChangePosition(o){var e,n=(e=5<RSGOPRO_ParentsObj.find("td.name").outerWidth(!0)?RSGOPRO_ParentsObj.find(".js-position"):RSGOPRO_ParentsObj.parents(".artables").find(".js-name"+o).find(".js-position")).position().left+e.outerWidth(!0)+20;$("#"+RSGOPRO_PopupPrefix+o).css({top:e.position().top+"px",left:n+"px"})}function RSGoPro_HideAllPopup(){$(".rsgppopup:visible").fadeOut("fast",function(){})}function RSGoPro_AddPopup(e,o){var n=$('.js-element[data-elementid="'+e+'"]').attr("data-detail")+"?AJAX_CALL=Y&"+rsGoProActionVariableName+"=rsgppopup&"+rsGoProProductIdVariableName+"="+e,i='<div id="'+RSGOPRO_PopupPrefix+e+'" class="rsgppopup" style="display:none;">'+RSGOPRO_DivsLeft+'<div class="loading"></div>'+RSGOPRO_DivsRight+"</div>";$("body").append(i),RSGoPro_ShowPopup(e),$.ajax({url:n}).done(function(o){$("#"+RSGOPRO_PopupPrefix+e).find(".inner").html(o),RSGoPro_SetSet(),RSGoPro_FixPreviewText(e),0<$(".elementpopupinner .prs_jscrollpane").length&&(RSGoPro_ScrollInit(".elementpopupinner .prs_jscrollpane"),$(window).resize(function(){RSGoPro_ScrollReinit(".elementpopupinner .prs_jscrollpane",1)})),0<$(".elementpopupinner .prices_jscrollpane").length&&(RSGoPro_ScrollInit(".elementpopupinner .prices_jscrollpane"),$(window).resize(function(){RSGoPro_ScrollReinit(".elementpopupinner .prices_jscrollpane",1)}))}).fail(function(){console.warn("Popup: wrong ajax request")})}$(document).ready(function(){$(document).on("keydown",function(o){27==o.keyCode&&RSGoPro_HideAllPopup()}),$(document).on("click",function(o){0<$(o.target).parents(".rsgppopup").length||RSGoPro_HideAllPopup()}),$(window).resize(function(){RSGoPro_HideAllPopup()}),$(document).on("RSGoProOnOfferChange",function(o,e){RSGoPro_OnOfferChangePopup(e)})});