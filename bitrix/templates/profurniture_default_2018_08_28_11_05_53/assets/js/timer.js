!function(y){"use strict";var t,D=BX.message("SERVER_TIME");y.fn.timer=function(e){e=y.extend({days:".days",hours:".hours",minute:".minute",second:".second",blockTime:".timer__item",linePercent:".progress_bar",textLinePercent:".progress_text",destroy:!1},e);return!(y(this).length<1)&&y.timer.count(this,e)},jQuery.extend({timer:{count:function(e,n){var i=y(n.minute).closest(n.blockTime).css("display");t||(D=parseInt(D)+1,setInterval(function(){D=parseInt(D)+1},1e3),t=!0),y(e).not(".runTimer").each(function(){var e=y(this),t=e.data("timer");"object"!=typeof t&&(t=BX.parseJSON(t)),y.timer.runTimer(e,n,i,t),setInterval(function(){y.timer.runTimer(e,n,i,t)},1e3),y(e).addClass("runTimer")})},runTimer:function(e,t,n,i){var s=e,r=i,a=r.DATE_TO-r.DATE_FROM,o=r.DATE_TO-D;if(o<1&&"Y"==r.AUTO_RENEWAL)for(var c=0;c<200;c++){var d=c*a+r.DATE_TO-D;if(0<d){o=d;break}}if(0<o){var f=parseInt(o/3600/24);f<10&&(f="0"+f),f=f.toString();var l=parseInt(o/3600),A=parseInt(o/3600%24);A<10&&(A="0"+A),A=A.toString();var T=parseInt(o/60)%60;T<10&&(T="0"+T),T=T.toString();var u=parseInt(o)%60;u<10&&(u="0"+u),u=u.toString();var m=!1;if(r.DINAMICA_DATA)if("evenly"==r.DINAMICA_DATA)m=Math.floor(100-o/a*100),s.find(t.linePercent).css("width",m+"%"),s.find(t.textLinePercent).text(m);else{var I=!1,p=!1;for(var v in r.DINAMICA_DATA){if(I||(p=I=v),I<l&&l<v){m=r.DINAMICA_DATA[v];break}I=v}m||(I<l?m=r.DINAMICA_DATA[I]:l<I&&(m=r.DINAMICA_DATA[p])),m&&(s.find(t.linePercent).css("width",m+"%"),s.find(t.textLinePercent).text(m))}else m=Math.floor(o/a*100),s.find(t.linePercent).css("width",m+"%"),s.find(t.textLinePercent).text(m);parseInt(f)<1&&y(t.days).is(":visible")?(s.find(t.days).closest(t.blockTime).css("display","none"),s.find(t.second).closest(t.blockTime).css("display",n)):0<parseInt(f)&&y(t.second).is(":visible")&&(s.find(t.days).closest(t.blockTime).css("display",n),s.find(t.second).closest(t.blockTime).css("display","none")),s.find(t.second).text(u),s.find(t.minute).text(T),s.find(t.hours).text(A),s.find(t.days).text(f)}}}})}(jQuery);